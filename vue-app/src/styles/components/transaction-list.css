.txn-list {
  display: flex;
  flex-direction: column;
  gap: var(--ft-layout-card-gap);
}

.txn-list__skeleton {
  display: grid;
  gap: var(--ft-space-2);
}

.txn-list__error {
  display: grid;
  gap: var(--ft-space-3);
  justify-items: start;
}

.txn-list__error--inline {
  width: 100%;
  max-width: 960px;
  margin: 0 auto;
}

/* --- Groups --- */
.txn-groups {
  display: flex;
  flex-direction: column;

  width: 100%;
  max-width: 960px;
  margin: 0 auto;
}

.txn-group__header {
  position: sticky;
  z-index: var(--ft-z-raised);
  top: 0;

  display: flex;
  align-items: center;
  justify-content: space-between;

  padding: var(--ft-space-2) var(--ft-space-4);

  font-size: var(--ft-text-sm);
  text-transform: uppercase;
  letter-spacing: 0.05em;

  background: var(--ft-surface-base);
  border-bottom: 1px solid var(--ft-border-soft);
}

.txn-group__date {
  font-weight: var(--ft-font-semibold);
  color: var(--ft-text-tertiary);
}

.txn-group__total {
  font-weight: var(--ft-font-semibold);
  font-variant-numeric: tabular-nums;
  color: var(--ft-text-secondary);
}

/* --- Transaction rows --- */
.txn-group__rows {
  display: flex;
  flex-direction: column;
}

.txn-row {
  cursor: pointer;

  display: flex;
  gap: var(--ft-space-3);
  align-items: center;
  justify-content: space-between;

  width: 100%;
  min-height: 76px;
  padding: var(--ft-space-4) var(--ft-space-5);

  font: inherit;
  color: inherit;
  text-align: left;

  background: none;
  border: none;
  border-bottom: 1px solid var(--ft-border-soft);

  transition: background-color var(--ft-transition-fast);
}

.txn-row:hover:not(:disabled) {
  background: var(--ft-surface-muted);
}

.txn-row:disabled {
  cursor: default;
}

.txn-row:last-child {
  border-bottom: none;
}

.txn-row--mandatory {
  border-left: 3px solid var(--ft-accent-primary);
  padding-left: calc(var(--ft-space-5) - 3px);
}

.txn-row__left {
  display: flex;
  gap: var(--ft-space-3);
  align-items: center;
  min-width: 0;
}

.txn-row__icon {
  display: flex;
  flex-shrink: 0;
  align-items: center;
  justify-content: center;

  width: 44px;
  height: 44px;

  border-radius: var(--ft-radius-md);
}

.txn-row__icon--transfer {
  color: var(--ft-primary-400);
  background: color-mix(in srgb, var(--ft-primary-400) 15%, transparent);
}

.txn-row__dot {
  display: block;
  width: 10px;
  height: 10px;
  border-radius: var(--ft-radius-full);
}

.txn-row__info {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.txn-row__category {
  display: flex;
  gap: var(--ft-space-1);
  align-items: center;

  font-size: var(--ft-text-lg);
  font-weight: var(--ft-font-semibold);
  color: var(--ft-text-primary);
}

.txn-row__meta {
  overflow: hidden;

  font-size: var(--ft-text-sm);
  color: var(--ft-text-tertiary);
  text-overflow: ellipsis;
  white-space: nowrap;
}

.txn-row__right {
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  gap: 2px;
  align-items: flex-end;
}

.txn-row__amount {
  font-size: var(--ft-text-lg);
  font-weight: var(--ft-font-semibold);
  font-variant-numeric: tabular-nums;
  line-height: 1.3;
  color: var(--ft-text-primary);
}

.txn-row__amount--negative {
  color: var(--ft-danger-400);
}

.txn-row__amount--positive {
  color: var(--ft-success-400);
}

.txn-row__original {
  font-size: var(--ft-text-xs);
  font-variant-numeric: tabular-nums;
  color: var(--ft-text-tertiary);
}

.txn-row__rate {
  font-size: var(--ft-text-xs);
  color: var(--ft-text-tertiary);
}

/* --- Mandatory toggle button --- */
.txn-row__mandatory-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;

  width: 44px;
  height: 44px;
  padding: 0;
  margin-left: var(--ft-space-1);

  color: var(--ft-text-tertiary);
  vertical-align: middle;

  background: none;
  border: none;
  border-radius: var(--ft-radius-md);
  outline: none;
  cursor: pointer;

  opacity: 0;
  transition:
    opacity var(--ft-transition-fast),
    color var(--ft-transition-fast),
    background-color var(--ft-transition-fast);
}

.txn-row__mandatory-btn i {
  font-size: 1rem;
}

.txn-row__mandatory-btn--active {
  color: var(--ft-warning-400);
  opacity: 1;
}

.txn-row__mandatory-btn:hover {
  color: var(--ft-warning-400);
  background: color-mix(in srgb, var(--ft-warning-400) 12%, transparent);
  opacity: 1;
}

.txn-row__mandatory-btn:disabled {
  opacity: 0.4;
  cursor: default;
}

.txn-row:hover .txn-row__mandatory-btn:not(.txn-row__mandatory-btn--active) {
  opacity: 1;
}

/* --- Footer --- */
.txn-list__footer {
  display: flex;
  flex-direction: column;
  gap: var(--ft-space-3);
  align-items: center;
}

.txn-list__paginator {
  padding: var(--ft-space-2);
  background: transparent;
  border: none;
}

.txn-list__total {
  font-size: var(--ft-text-sm);
  color: var(--ft-text-secondary);
}

.txn-list__total strong {
  font-weight: 700;
  color: var(--ft-text-primary);
}

/* Light mode: --ft-warning-400 (#C7A246) on white = 2.4:1 — fails WCAG 1.4.11 (3:1).
   Use --ft-warning-700 (#7E5D1F) = 6.0:1 on white — consistent with light-mode badge/urgency token pattern. */
.light-mode .txn-row--mandatory {
  border-left-color: var(--ft-warning-700);
}

.light-mode .txn-row__mandatory-btn--active,
.light-mode .txn-row__mandatory-btn:hover {
  color: var(--ft-warning-700);
}

.light-mode .txn-row__mandatory-btn:hover {
  background: color-mix(in srgb, var(--ft-warning-700) 10%, transparent);
}

@media (width <= 640px) {
  .txn-row {
    min-height: 56px;
    padding: var(--ft-space-2) var(--ft-space-3);
  }

  .txn-group__header {
    padding: var(--ft-space-2) var(--ft-space-3);
  }

  .txn-row--mandatory {
    padding-left: calc(var(--ft-space-3) - 3px);
  }

  .txn-row__meta {
    max-width: 160px;
  }

  .txn-row__mandatory-btn {
    opacity: 1;
  }
}
