# TODO.md

## 1. UI/UX — Глобальный редизайн (Design System & Visual Quality)

### 1.1 Общая визуальная переработка
- Провести полный аудит UI.
- Устранить ощущение "дешевого" дизайна.
- Привести все страницы к единому визуальному стандарту:
    - единая цветовая палитра
    - единая система отступов
    - единая типографика
    - единая система скруглений
    - единая система теней
- Удалить визуальные артефакты и конфликты стилей.
- Проверить соответствие современным финтех-приложениям (Stripe / Revolut / Tinkoff-стиль).

---

## 2. Mobile-First Refactor

### 2.1 Модальные окна
- Полностью переработать все модальные окна по принципу mobile-first.
- Устранить горизонтальный скролл на мобильных устройствах.
- Гарантировать, что модалка всегда полностью помещается по ширине экрана.
- Исправить конфликт скруглений (исключить наложение прямых углов поверх rounded).
- Проверить адаптивность:
    - padding
    - кнопки
    - поля ввода
    - overflow
- Исправить кнопку "Сохранить" в создании транзакции:
    - она должна активироваться после корректного ввода суммы.

---

### 2.2 Страница "Аналитика"
- Переработать layout под mobile-first.
- Устранить необходимость "отдалять страницу" для просмотра контента.
- Проверить:
    - grid
    - масштабирование графиков
    - перенос текста
    - адаптивность виджетов.

---

### 2.3 Tooltip / Help Icons
- Иконки "?" в виджетах Аналитики должны:
    - корректно нажиматься на мобильных устройствах.
    - иметь достаточную зону клика.
    - не конфликтовать с pointer-events.

---

## 3. Filters Redesign

### 3.1 Страницы:
- Транзакции
- Счета
- Инвестиции

Требования:
- Полный редизайн фильтров.
- Убрать "дешевый" визуальный стиль.
- Убрать агрессивное цветовое выделение при focus.
- Сделать:
    - аккуратные input
    - аккуратные select
    - единый стиль
- Исправить кнопку "Сброс фильтров":
    - должна работать на всех страницах одинаково.
    - должна сбрасывать состояние UI и query-параметры.

---

## 4. Бизнес-логика — Исправления

### 4.1 Транзакции
- При нажатии "Сохранить и добавить еще":
    - сохранять предыдущую дату по умолчанию.
- Иногда категории не успевают загрузиться:
    - обеспечить гарантированную загрузку категорий до рендера списка.
    - убрать пустые значения в таблице.

---

### 4.2 Счета

#### 4.2.1 Корректировка баланса
- После корректировки баланса:
    - карточка счета должна обновлять текущий баланс без перезагрузки страницы.
    - убрать необходимость повторного открытия модалки.

#### 4.2.2 Тип счета
- Добавить выбор типа счета:
    - Наличные
    - Банковский счет

#### 4.2.3 Переводы между счетами
- Если сумма перевода превышает баланс:
    - операция должна блокироваться.
- Сейчас:
    - деньги появляются у получателя,
    - но не списываются у отправителя.
- Исправить логику:
    - транзакция перевода должна быть атомарной.
    - баланс отправителя должен уменьшаться.
    - добавить серверную валидацию.

---

### 4.3 Инвестиции
- В карточках счетов:
    - отображать суммы в оригинальной валюте мелким шрифтом,
    - если валюта счета отличается от валюты пользователя.
- Поведение должно соответствовать странице "Счета".

---

### 4.4 Изменение капитала (Net Worth)
- График не должен генерировать данные:
    - за даты, когда счета еще не существовали.
- Отображать график:
    - только с момента появления первых транзакций.
    - или с даты создания первого счета.

---

## 5. Performance & Architecture

### 5.1 API-оптимизация
- Уменьшить количество повторяющихся API-вызовов:
    - при переходе между страницами.
    - при обновлении данных.
- Реализовать:
    - нормализованное хранилище состояния.
    - предотвращение дублирующих запросов.
- Проверить:
    - useEffect / watch зависимости.
    - повторные mounted hooks.
    - избыточные refetch.

---

## 6. Проверка после внедрения

Обязательно:
- Проверить все изменения на:
    - desktop
    - tablet
    - mobile
- Проверить:
    - UX-целостность
    - визуальную консистентность
    - корректность бизнес-логики
    - отсутствие регрессий